{"version":3,"file":"Undernames-0fef2411.js","sources":["../../src/components/pages/Undernames/Undernames.tsx"],"sourcesContent":["import { Tooltip } from '@src/components/data-display';\nimport UndernamesTable from '@src/components/data-display/tables/UndernamesTable';\nimport { RefreshIcon, SearchIcon } from '@src/components/icons';\nimport useDomainInfo from '@src/hooks/useDomainInfo';\nimport { MAX_UNDERNAME_COUNT } from '@src/utils/constants';\nimport { useEffect, useState } from 'react';\nimport { useNavigate, useParams } from 'react-router-dom';\n\nimport {\n  formatForMaxCharCount,\n  isArweaveTransactionID,\n  lowerCaseDomain,\n} from '../../../utils';\nimport eventEmitter from '../../../utils/events';\nimport './styles.css';\n\nfunction Undernames() {\n  const navigate = useNavigate();\n  const { id, name } = useParams();\n  const {\n    data,\n    isLoading: isLoadingDomainInfo,\n    isRefetching: isRefetchingDomainInfo,\n    refetch: refetchDomainInfo,\n  } = useDomainInfo({\n    domain: name,\n    antId: isArweaveTransactionID(id) ? id : undefined,\n  });\n  const [isMaxUndernameCount, setIsMaxUndernameCount] =\n    useState<boolean>(false);\n  const [search, setSearch] = useState<string>('');\n\n  useEffect(() => {\n    if (!id && !name) {\n      eventEmitter.emit('error', new Error('Missing ANT transaction ID.'));\n      navigate('/manage/ants');\n      return;\n    }\n    setIsMaxUndernameCount(\n      !!data?.arnsRecord?.undernameLimit &&\n        data?.arnsRecord?.undernameLimit >= MAX_UNDERNAME_COUNT,\n    );\n  }, [id, name, data, isLoadingDomainInfo]);\n\n  const filteredUndernames = Object.fromEntries(\n    Object.entries(data?.state?.Records ?? {}).filter(([undername]) =>\n      undername.toLowerCase().includes(search.toLowerCase()),\n    ),\n  );\n\n  return (\n    <>\n      <div className=\"px-[100px]\">\n        <div className=\"flex flex-col gap-4\">\n          <div className=\"flex flex-justify-between\">\n            <div\n              className=\"flex flex-row\"\n              style={{ justifyContent: 'space-between' }}\n            >\n              <h2 className=\"white text-[2rem] whitespace-nowrap\">\n                Manage Undernames\n              </h2>\n              <Tooltip\n                message={\n                  isMaxUndernameCount\n                    ? 'Max undername support reached'\n                    : 'Increase undername support'\n                }\n                icon={\n                  <button\n                    disabled={isLoadingDomainInfo || isMaxUndernameCount}\n                    className={`button-secondary ${\n                      isLoadingDomainInfo || isMaxUndernameCount\n                        ? 'disabled-button'\n                        : 'hover'\n                    }`}\n                    style={{\n                      padding: '9px',\n                      gap: '8px',\n                      fontSize: '14px',\n                      color: 'var(--accent)',\n                      fontFamily: 'Rubik',\n                    }}\n                    onClick={() =>\n                      navigate(\n                        `/manage/names/${lowerCaseDomain(\n                          name!,\n                        )}/upgrade-undernames`,\n                      )\n                    }\n                  >\n                    Increase Undernames\n                  </button>\n                }\n              />\n            </div>\n          </div>\n\n          <div className=\"border-x-[1px] border-y-[1px] border-dark-grey rounded-t-[5px]\">\n            <div className=\"flex w-full p-3 border-b-[1px] border-dark-grey relative\">\n              <SearchIcon\n                width={'18px'}\n                height={'18px'}\n                className=\"fill-white absolute top-[13.5px] left-[11px]\"\n              />\n              <input\n                className=\"pl-7 flex bg-background w-full focus:outline-none text-white placeholder:text-dark-grey\"\n                onChange={(e) => setSearch(e.target.value)}\n                value={search}\n                placeholder={`Search undernames on '${\n                  name ?? formatForMaxCharCount(id ?? '', 10)\n                }'`}\n              />\n              <button\n                onClick={() => refetchDomainInfo()}\n                className=\"button center pointer\"\n              >\n                <RefreshIcon height={16} width={16} fill=\"var(--text-white)\" />\n              </button>\n            </div>\n            <UndernamesTable\n              undernames={filteredUndernames}\n              arnsRecord={{\n                name: lowerCaseDomain(name ?? ''),\n                version: data?.version ?? 0,\n                undernameLimit: data?.arnsRecord?.undernameLimit ?? 0,\n                processId: data?.arnsRecord?.processId ?? '',\n              }}\n              state={data?.state ?? null}\n              isLoading={isLoadingDomainInfo || isRefetchingDomainInfo}\n            />\n          </div>\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default Undernames;\n"],"names":["Undernames","navigate","useNavigate","id","name","useParams","data","isLoadingDomainInfo","isRefetchingDomainInfo","refetchDomainInfo","useDomainInfo","isArweaveTransactionID","isMaxUndernameCount","setIsMaxUndernameCount","reactExports","search","setSearch","eventEmitter","_a","_b","MAX_UNDERNAME_COUNT","filteredUndernames","undername","jsxRuntimeExports","Tooltip","lowerCaseDomain","SvgSearch","e","formatForMaxCharCount","SvgRefresh","UndernamesTable","_c"],"mappings":"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"}