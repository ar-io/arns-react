import{c4 as l,j as e,c as W,g as M,bd as U,k as F,e as L,aV as O,r as i,cs as I,ct as q,bP as H,cu as z,bV as G,bW as V,cv as Y,c1 as X,cw as J,cx as K,bo as Q,bp as Z}from"./index-1de0d2a6.js";import{A as $}from"./ANTCard-bb76bd85.js";(function(){try{var s=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},c=new Error().stack;c&&(s._sentryDebugIds=s._sentryDebugIds||{},s._sentryDebugIds[c]="8df9b98e-746b-41cd-603b-8b1ce8bf7c3f",s._sentryDebugIdIdentifier="sentry-dbid-8df9b98e-746b-41cd-603b-8b1ce8bf7c3f")}catch{}})();function T({workflowName:s}){switch(s){case l.INCREASE_UNDERNAMES:case l.EXTEND_LEASE:return e.jsx("h1",{className:"flex white text-[2rem]",style:{width:"100%",paddingBottom:"30px"},children:"Review"});case l.UPGRADE_NAME:case l.BUY_RECORD:return"Review your Purchase";default:return}}function se(){var y,N,E;const s=W(),[{arioContract:c,arioProcessId:f,aoNetwork:h,aoClient:v,hyperbeamUrl:b,antRegistryProcessId:A}]=M(),[,j]=U(),[{walletAddress:a,wallet:u}]=F(),[{workflowName:n,interactionType:d,transactionData:t,interactionResult:r},P]=L(),k=O(),[p,R]=i.useState(),[o,C]=i.useState(I(d)),[g,D]=i.useState(T({workflowName:n})),[S,_]=i.useState("balance"),w={...t??{},intent:q[n],fromAddress:a==null?void 0:a.toString(),fundFrom:S,quantity:t==null?void 0:t.qty},{data:x}=H(w);i.useEffect(()=>{if(!t&&!n){s("/");return}R(z({interactionType:d,transactionData:{...t,deployedTransactionId:r==null?void 0:r.id}})),C(I(d)),D(T({workflowName:n}))},[t,r,n,d,a]),i.useEffect(()=>{r!=null&&r.id&&s("/transaction/complete")},[r,s]);async function B(){try{if(!(c instanceof J))throw new Error("Wallet must be connected to dispatch transactions.");if(!t||!n)throw new Error("Transaction data is missing");if(!a)throw new Error("Wallet address is missing");await K({arioContract:c,workflowName:n,payload:t,owner:a,processId:f,dispatch:P,signer:u==null?void 0:u.contractSigner,ao:v,scheduler:h.ARIO.SCHEDULER,fundFrom:S,hyperbeamUrl:b})}catch(m){Q.emit("error",m)}finally{a&&Z({dispatch:j,arioProcessId:f,antRegistryProcessId:A,walletAddress:a,aoNetworkSettings:h,hyperbeamUrl:b})}}return p?e.jsx("div",{className:"page",children:e.jsxs("div",{className:"flex flex-column center",style:k?{}:{gap:"0px",maxWidth:"900px",width:"100%"},children:[o&&o.length?e.jsx("div",{className:"flex flex-row",style:{marginBottom:"20px",width:"100%"},children:e.jsx(V,{stage:3,stages:o})}):e.jsx(e.Fragment,{}),typeof g=="string"?e.jsx("div",{className:"flex flex-row text-large white bold center",style:{height:"100%",padding:"50px 0px",borderTop:o!=null&&o.length?"solid 1px var(--text-faded)":""},children:g}):g,e.jsx($,{...p,bordered:!0,compact:!0,overrides:{...p.overrides,targetId:(y=t==null?void 0:t.targetId)==null?void 0:y.toString()}}),e.jsx("div",{className:"flex w-full pt-10 box-border",children:e.jsx(Y,{details:w,fundingSourceCallback:m=>_(m)})}),e.jsx("div",{className:"flex",style:{marginTop:20,width:"100%",justifyContent:"flex-end"},children:e.jsx(X,{onNext:!x||(N=x.fundingPlan)!=null&&N.shortfall&&((E=x.fundingPlan)==null?void 0:E.shortfall)>0?void 0:()=>B(),onBack:()=>s(-1),backText:"Back",nextText:"Confirm",customBackStyle:{fontSize:".875rem",padding:".625rem"},customNextStyle:{width:"100px",fontSize:".875rem",padding:".625rem"}})})]})}):e.jsx(G,{loading:!0,message:"Loading transaction data..."})}export{se as default};
//# sourceMappingURL=TransactionReview-20e9c048.js.map
