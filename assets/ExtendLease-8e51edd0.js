import{g as C,k as _,e as D,cM as U,c as M,d as P,r as p,bY as s,bP as B,bQ as F,bT as Y,bR as O,bS as W,bD as j,b_ as $,aT as G,j as e,aY as V,b0 as S,b$ as I,cS as X,cT as Q,bZ as Z,cU as q,c1 as z,o as R,f as T,c4 as g}from"./index-1de0d2a6.js";import{C as H}from"./Counter-d3dc2afd.js";(function(){try{var d=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},m=new Error().stack;m&&(d._sentryDebugIds=d._sentryDebugIds||{},d._sentryDebugIds[m]="e40a01ee-4466-44b5-bda0-102f90e0b75c",d._sentryDebugIdIdentifier="sentry-dbid-e40a01ee-4466-44b5-bda0-102f90e0b75c")}catch{}})();function ee(){const[{arioTicker:d,arioProcessId:m}]=C(),[{walletAddress:o}]=_(),[,l]=D(),L=U(),b=M(),r=L.pathname.split("/").at(-2),{data:t,isLoading:E}=P({domain:r}),n=t==null?void 0:t.arnsRecord,[a,f]=p.useState(s.LEASE),[c,A]=p.useState(1),[x,N]=p.useState(0),{data:u,isLoading:w}=B(a==="permabuy"?{intent:"Upgrade-Name",name:r,fundFrom:"any",fromAddress:o==null?void 0:o.toString()}:{fromAddress:o==null?void 0:o.toString(),intent:"Extend-Lease",years:c,type:a==null?void 0:a.toString(),name:r,fundFrom:"any"}),{data:y,isLoading:v}=F(a==="permabuy"?{intent:"Upgrade-Name",name:r}:{intent:"Extend-Lease",years:c,type:a==null?void 0:a.toString(),name:r}),i=u!=null&&u.tokenCost?new Y(u.tokenCost).toARIO().valueOf():void 0,k=p.useMemo(()=>w||v?"Calculating price...":i&&y?`$${O(y.fiatEstimate.paymentAmount/100)} USD ( ${W(i)} ${d} )`:"Unable to calculate price",[i,y,w,v]);return p.useEffect(()=>{var h;if(!r){b("/manage/names");return}if(t!=null&&t.arnsRecord)if(f((h=t.arnsRecord)==null?void 0:h.type),j(t==null?void 0:t.arnsRecord))N(Math.max(0,$-G(t.arnsRecord.startTimestamp,t.arnsRecord.endTimestamp)));else{f(s.BUY),N(0);return}},[r,t]),t!=null&&t.arnsRecord&&!j(t.arnsRecord)?e.jsx("div",{className:"page center",children:e.jsx(V,{showClose:!1,cancelText:"Manage",body:e.jsx("span",{className:"flex flex-column white center",style:{height:"100%"},children:"This domain is permanently registered and its lease cannot be extended."})})}):e.jsx("div",{className:"page center",children:e.jsxs("div",{className:"flex flex-column",style:{maxWidth:"1000px"},children:[e.jsxs("div",{className:"flex flex-row center",style:{justifyContent:"space-between"},children:[e.jsx("h1",{className:"white text-[2rem]",children:"Extend Lease"}),e.jsxs("div",{className:"flex flex-row center white",style:{border:"solid 1px var(--text-faded)",borderRadius:"var(--corner-radius)",gap:"8px",width:"fit-content",padding:"12px"},children:[e.jsx(S,{width:"22px",height:"22px",fill:"var(--text-grey)"}),"Expiring on"," ",n!=null&&n.endTimestamp?I(n.endTimestamp):"N/A"]})]})," ",e.jsxs("div",{className:"flex flex-row flex-space-between",style:{gap:"25px"},children:[e.jsxs("button",{className:"flex flex-row center text-medium bold pointer",onClick:()=>f(s.LEASE),style:{position:"relative",background:a===s.LEASE?"var(--text-white)":"",color:a===s.LEASE?"var(--text-black)":"var(--text-white)",border:"solid 2px var(--text-faded)",borderRadius:"var(--corner-radius)",height:"56px",borderBottomWidth:"0.5px"},children:["Extend Lease"," ",a===s.LEASE?e.jsx("div",{style:{position:"absolute",bottom:"-6px",left:"50%",transform:"rotate(45deg)",width:"11px",height:"11px",background:"var(--text-white)"}}):e.jsx(e.Fragment,{})]}),e.jsxs("button",{className:"flex flex-row center text-medium bold pointer",style:{position:"relative",background:a===s.BUY?"var(--text-white)":"",color:a===s.BUY?"var(--text-black)":"var(--text-white)",border:"solid 2px var(--text-faded)",borderRadius:"var(--corner-radius)",height:"56px",borderBottomWidth:"0.5px"},onClick:()=>f(s.BUY),children:["Permanently Buy"," ",a===s.BUY?e.jsx("div",{style:{position:"absolute",bottom:-6,left:"50%",transform:"rotate(45deg)",width:"11px",height:"11px",background:"var(--text-white)"}}):e.jsx(e.Fragment,{})]})]}),e.jsx("div",{className:"flex flex-col relative p-[30px] w-full h-[200px] bg-foreground box-border rounded-md items-center justify-center ",children:a===s.LEASE?e.jsxs(e.Fragment,{children:[" ",E&&e.jsx("div",{className:"flex flex-col items-center justify-center rounded-md bg-foreground h-full w-full absolute top-0 left-0",children:e.jsx("div",{className:"flex flex-row items-center justify-center",children:e.jsx(X,{animationData:Q,loop:!0,className:"h-[150px]"})})}),!E&&x<1&&e.jsx("div",{className:"flex flex-col center  rounded-md  bg-[rgb(0,0,0,0.5)] h-full w-full absolute top-0 left-0",children:e.jsxs("div",{className:"flex flex-row items-center justify-center max-w-fit h-fit rounded-md border border-error text-white bg-foreground p-6 gap-2",children:[" ",e.jsx(S,{width:"24px",height:"24px",fill:"var(--error-red)"}),e.jsx("span",{className:"center",children:"Maximum lease extension reached"})]})}),e.jsx(H,{setValue:A,value:c,maxValue:x,minValue:Z,valueName:c>1?"years":"year",valueStyle:{padding:"10px 80px"},detail:e.jsxs("span",{children:["until"," ",n!=null&&n.endTimestamp?I((n==null?void 0:n.endTimestamp)+c*q):"N/A"]}),title:e.jsx("span",{className:"white",style:{padding:"0px 10px 10px 10px",fontWeight:"500"},children:`Extension Duration ( up to ${Math.max(1,x)} year${x>1?"s":""} )`})})]}):e.jsxs("div",{className:"flex flex-column flex-center",style:{gap:"1em"},children:[e.jsx("span",{className:"text-medium grey center",children:"Registration Period"}),e.jsx("span",{className:"text-medium white center",children:"Permanent"})]})}),e.jsx("span",{className:"flex text-white border-b border-dark-grey items-end pb-4 w-full justify-end",children:k}),e.jsx(z,{backText:"Cancel",nextText:"Continue",customNextStyle:{background:x<1&&a===s.LEASE&&"var(--text-grey)",color:x<1&&a===s.LEASE&&"var(--text-white)"},onBack:()=>{b(`/manage/names/${R(r)}`)},onNext:!i||i<=0?void 0:()=>{if(a===s.LEASE&&(t!=null&&t.arnsRecord)&&r){const h={name:r,years:c,processId:new T(t==null?void 0:t.arnsRecord.processId)};l({type:"setInteractionType",payload:g.EXTEND_LEASE}),l({type:"setWorkflowName",payload:g.EXTEND_LEASE}),l({type:"setTransactionData",payload:{assetId:m,functionName:"extendRecord",...h,arnsRecord:t.arnsRecord,interactionPrice:i}})}else t!=null&&t.arnsRecord&&r&&(l({type:"setInteractionType",payload:g.UPGRADE_NAME}),l({type:"setWorkflowName",payload:g.UPGRADE_NAME}),l({type:"setTransactionData",payload:{assetId:m,functionName:"upgradeName",name:r,processId:new T(t.arnsRecord.processId),arnsRecord:t.arnsRecord,interactionPrice:i}}));b("/checkout",{state:`/manage/names/${R(r)}/extend`})}})," "]})})}export{ee as default};
//# sourceMappingURL=ExtendLease-8e51edd0.js.map
