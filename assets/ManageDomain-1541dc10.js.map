{"version":3,"file":"ManageDomain-1541dc10.js","sources":["../../src/components/pages/ManageDomain/ManageDomain.tsx"],"sourcesContent":["import { Tooltip } from '@src/components/data-display';\nimport { AntLogoIcon } from '@src/components/data-display/AntLogoIcon';\nimport UndernamesTable from '@src/components/data-display/tables/UndernamesTable';\nimport DomainSettings from '@src/components/forms/DomainSettings/DomainSettings';\nimport ArweaveID, {\n  ArweaveIdTypes,\n} from '@src/components/layout/ArweaveID/ArweaveID';\nimport useDomainInfo from '@src/hooks/useDomainInfo';\nimport { usePrimaryName } from '@src/hooks/usePrimaryName';\nimport { useGlobalState, useModalState, useWalletState } from '@src/state';\nimport { useTransactionState } from '@src/state/contexts/TransactionState';\nimport { AoAddress } from '@src/types';\nimport { Star } from 'lucide-react';\nimport { useEffect, useState } from 'react';\nimport { useNavigate, useParams } from 'react-router-dom';\n\nimport { decodeDomainToASCII, lowerCaseDomain } from '../../../utils';\nimport './styles.css';\n\nfunction ManageDomain() {\n  const { name } = useParams();\n  const navigate = useNavigate();\n  const [{ arioProcessId }] = useGlobalState();\n  const [, dispatchTransactionState] = useTransactionState();\n  const [, dispatchModalState] = useModalState();\n  const { data: primaryNameData } = usePrimaryName();\n  const { data: domainData } = useDomainInfo({\n    domain: name,\n  });\n  const [{ walletAddress }] = useWalletState();\n  const isOwner = walletAddress\n    ? walletAddress.toString() === domainData?.state?.Owner\n    : false;\n\n  const [logoId, setLogoId] = useState<string | undefined>();\n\n  useEffect(() => {\n    if (!name) {\n      navigate('/manage/names');\n      return;\n    }\n    // Reset transaction state on unmount - clears transaction success banner\n    return () => {\n      dispatchTransactionState({ type: 'reset' });\n    };\n  }, [name]);\n\n  return (\n    <>\n      <div\n        className=\"page gap-3\"\n        style={{ paddingTop: '10px', paddingBottom: '10px' }}\n      >\n        <div\n          className=\"flex flex-row border-b border-dark-grey pb-2\"\n          style={{\n            justifyContent: 'space-between',\n            width: '100%',\n          }}\n        >\n          <h2 className=\"flex white center\" style={{ gap: '16px' }}>\n            <AntLogoIcon id={logoId} />\n\n            <div className=\"flex flex-col items-start justify-center\">\n              <div className=\"flex items-center gap-2\">\n                {decodeDomainToASCII(name!)}\n                <Star\n                  className={\n                    (name === primaryNameData?.name\n                      ? 'text-primary fill-primary'\n                      : 'text-grey') + ` w-[18px]`\n                  }\n                />\n              </div>\n              {domainData?.processId && (\n                <div className=\"text-sm flex items-center gap-1\">\n                  <span className=\"whitespace-nowrap text-sm text-grey\">\n                    Process ID:{' '}\n                  </span>\n                  <ArweaveID\n                    id={domainData.processId as AoAddress}\n                    shouldLink={true}\n                    characterCount={16}\n                    type={ArweaveIdTypes.CONTRACT}\n                  />\n                </div>\n              )}{' '}\n            </div>\n          </h2>\n          {isOwner && (\n            <Tooltip\n              message={\n                name === primaryNameData?.name\n                  ? 'Remove this name from being the primary name for this wallet address'\n                  : 'Set this name as this wallet addresses primary name'\n              }\n              icon={\n                <button\n                  className={\n                    'flex text-primary bg-primary-thin max-w-fit rounded border border-primary px-3 py-1 gap-3 text-[16px] items-center'\n                  }\n                  onClick={() => {\n                    if (!name) return;\n                    if (primaryNameData?.name === name) {\n                      // remove primary name payload\n                      dispatchTransactionState({\n                        type: 'setTransactionData',\n                        payload: {\n                          names: [name],\n                          arioProcessId,\n                          assetId: '',\n                          functionName: 'removePrimaryNames',\n                        },\n                      });\n                    } else {\n                      dispatchTransactionState({\n                        type: 'setTransactionData',\n                        payload: {\n                          name,\n                          arioProcessId,\n                          assetId: arioProcessId,\n                          functionName: 'primaryNameRequest',\n                        },\n                      });\n                    }\n\n                    dispatchModalState({\n                      type: 'setModalOpen',\n                      payload: { showPrimaryNameModal: true },\n                    });\n                  }}\n                >\n                  <Star className={`w-[16px]`} />{' '}\n                  {name === primaryNameData?.name\n                    ? 'Remove Primary'\n                    : 'Set as Primary'}\n                </button>\n              }\n            />\n          )}\n        </div>\n        <div className=\"w-full \">\n          <DomainSettings\n            domain={lowerCaseDomain(name || '')}\n            setLogo={(id?: string) => setLogoId(id)}\n          />\n        </div>\n\n        <div className=\"w-full border-t border-dark-grey pt-4 mt-4\">\n          <h3 className=\"text-xl font-semibold text-white mb-5 flex items-center gap-2\">\n            Undernames\n          </h3>\n          <div className=\"border border-dark-grey rounded\">\n            <UndernamesTable\n              undernames={domainData?.records || {}}\n              state={domainData?.state}\n              arnsRecord={{\n                name: lowerCaseDomain(name || ''),\n                version: 0,\n                undernameLimit: domainData?.arnsRecord?.undernameLimit || 0,\n                processId: domainData?.arnsRecord?.processId || '',\n              }}\n              isLoading={false}\n            />\n          </div>\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default ManageDomain;\n"],"names":["ManageDomain","name","useParams","navigate","useNavigate","arioProcessId","useGlobalState","dispatchTransactionState","useTransactionState","dispatchModalState","useModalState","primaryNameData","usePrimaryName","domainData","useDomainInfo","walletAddress","useWalletState","isOwner","_a","logoId","setLogoId","reactExports","jsxRuntimeExports","AntLogoIcon","decodeDomainToASCII","Star","ArweaveID","ArweaveIdTypes","Tooltip","DomainSettings","lowerCaseDomain","id","UndernamesTable","_b","_c"],"mappings":"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"}